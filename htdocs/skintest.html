<!DOCTYPE html>
<html lang="en">

<head>

<style>
.button
{
    display: inline-block;
    white-space: nowrap;
    background-color: #ddd;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#ccc));
    background-image: -webkit-linear-gradient(top, #eee, #ccc);
    background-image: -moz-linear-gradient(top, #eee, #ccc);
    background-image: -ms-linear-gradient(top, #eee, #ccc);
    background-image: -o-linear-gradient(top, #eee, #ccc);
    background-image: linear-gradient(top, #eee, #ccc);
    border: 1px solid #777;
    padding: 0 1.5em;
    margin: 0.5em;
    font: bold 1em/2em Arial, Helvetica;
    text-decoration: none;
    color: #333;
    text-shadow: 0 1px 0 rgba(255,255,255,.8);
    -moz-border-radius: .2em;
    -webkit-border-radius: .2em;
    border-radius: .2em;
    -moz-box-shadow: 0 0 1px 1px rgba(255,255,255,.8) inset, 0 1px 0 rgba(0,0,0,.3);
    -webkit-box-shadow: 0 0 1px 1px rgba(255,255,255,.8) inset, 0 1px 0 rgba(0,0,0,.3);
    box-shadow: 0 0 1px 1px rgba(255,255,255,.8) inset, 0 1px 0 rgba(0,0,0,.3);
}

.button:hover
{
    background-color: #eee;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#fafafa), to(#ddd));
    background-image: -webkit-linear-gradient(top, #fafafa, #ddd);
    background-image: -moz-linear-gradient(top, #fafafa, #ddd);
    background-image: -ms-linear-gradient(top, #fafafa, #ddd);
    background-image: -o-linear-gradient(top, #fafafa, #ddd);
    background-image: linear-gradient(top, #fafafa, #ddd);
}

.button:active
{
    -moz-box-shadow: 0 0 4px 2px rgba(0,0,0,.3) inset;
    -webkit-box-shadow: 0 0 4px 2px rgba(0,0,0,.3) inset;
    box-shadow: 0 0 4px 2px rgba(0,0,0,.3) inset;
    position: relative;
    top: 1px;
}

.button:focus
{
    outline: 0;
    background: #fafafa;
}

.button:before
{
    background: #ccc;
    background: rgba(0,0,0,.1);
    width: 1em;
    text-align: center;
    font-size: 1.3em;
    margin: 0 1em 0 -1em;
    padding: 0 .2em;
    -moz-box-shadow: 1px 0 0 rgba(0,0,0,.5), 2px 0 0 rgba(255,255,255,.5);
    -webkit-box-shadow: 1px 0 0 rgba(0,0,0,.5), 2px 0 0 rgba(255,255,255,.5);
    box-shadow: 1px 0 0 rgba(0,0,0,.5), 2px 0 0 rgba(255,255,255,.5);
    -moz-border-radius: .15em 0 0 .15em;
    -webkit-border-radius: .15em 0 0 .15em;
    border-radius: .15em 0 0 .15em;
    pointer-events: none;
}

/* Buttons and inputs */

button.button, input.button
{
cursor: pointer;
overflow: visible; /* removes extra side spacing in IE */
}

/* removes extra inner spacing in Firefox */
button::-moz-focus-inner
{
border: 0;
padding: 0;
}

/* If line-height can't be modified, then fix Firefox spacing with padding */
input::-moz-focus-inner
{
padding: .4em;
}

/* The disabled styles */
.button[disabled], .button[disabled]:hover, .button.disabled, .button.disabled:hover
{
background: #eee;
color: #aaa;
border-color: #aaa;
cursor: default;
text-shadow: none;
position: static;
-moz-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
}

/* Hexadecimal entities for the icons */

.test:before
{


}

.next:before
{
    content: "\279C";
}


/* Social media buttons */
.fb,
.fb:hover
{
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,.5)), to(rgba(255,255,255,0)));
    background-image: -webkit-linear-gradient(top, rgba(255,255,255,.5), rgba(255,255,255,0));
    background-image: -moz-linear-gradient(top, rgba(255,255,255,.5), rgba(255,255,255,0));
    background-image: -ms-linear-gradient(top, rgba(255,255,255,.5), rgba(255,255,255,0));
    background-image: -o-linear-gradient(top, rgba(255,255,255,.5), rgba(255,255,255,0));
    background-image: linear-gradient(top, rgba(255,255,255,.5), rgba(255,255,255,0));
}


.fb, .fb:focus
{
background-color: #3C5A98;
color: #fff;
text-shadow: 0 1px 0 rgba(0,0,0,.4);
}

.fb:hover
{
background-color: #879bc3;
}

.fb:before
{
content: "f";
background: #4467ac;
background: rgba(0,0,0,.1);
color: #fff;
text-shadow: 0 1px 0 rgba(0,0,0,.4);
}
/* Center the loader */
#loader {
  position: absolute;
  left: 50%;
  top: 50%;
  z-index: 1;
  width: 150px;
  height: 150px;
  margin: -75px 0 0 -75px;
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite;
  animation: spin 2s linear infinite;
}

@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Add animation to "page content" */
.animate-bottom {
  position: relative;
  -webkit-animation-name: animatebottom;
  -webkit-animation-duration: 1s;
  animation-name: animatebottom;
  animation-duration: 1s
}

@-webkit-keyframes animatebottom {
  from { bottom:-100px; opacity:0 }
  to { bottom:0px; opacity:1 }
}

@keyframes animatebottom {
  from{ bottom:-100px; opacity:0 }
  to{ bottom:0; opacity:1 }
}

#myDiv {
  display: none;
  text-align: center;
}
</style>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Business Frontpage - Start Bootstrap Template</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#" onclick = "location.href = 'webmain.html' ">Tonymony</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Image Background Page Header -->
    <!-- Note: The background image is set within the business-casual.css file. -->
    <header class="business-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">

                </div>
            </div>
        </div>
    </header>

    <!-- Page Content -->
    <div class="container">

        <hr>

        <div class="row">
            <div class="col-sm-8">
              <div class="row">
                    <img src="img/Temp2.png" alt="">
              </div>  <div class="row">
                      <img src="img/Temp2.png" alt="">
                </div>
                <p>
                </p>
            </div>
        </div>
        <!-- /.row -->

        <hr>

        <div class="row">
              <img src="img/sensorinfo.png" alt="">
          </div>

        <hr>
        <div class="row">
              <img src="img/Temp2.png" alt="">
        </div>

        <div class-"row">
            <div class="col-md-4">
            </div>
            <div class="col-md-3">
                <a class="button" onclick = skintest() style="font-size:20pt;margin-top: 0px;padding-left: 10px;
                prdding-right: 10px; height: 57px; padding-right: 10px;">
                <img src="img/colorcircle3.png">피부톤 측정</a>
            </div>
            <div class="col-md-5">
              <a class="button next" onclick = submit() style="font-size:20pt;margin-top: 0px;">Next</a>
            </div>
        </div>

        <div class-"row">
            <div class="col-md-10">

            </div>
            <div class="col-md-2">

            </div>
        </div>

        <!-- /.row -->

        <hr>

        <!-- Footer -->
        <footer>
          <div class="row">
                <img src="img/Temp2.png" alt="">
          </div>
          <div class="row">
                <img src="img/Temp2.png" alt="">
          </div>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; 아주대학교 소프트웨어학과 캡스톤디자인 2017</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->


    <div id="loader"></div>
</body>
<script src="sweetalert-master/dist/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="sweetalert-master/dist/sweetalert.css">

<script>
document.getElementById("loader").style.display = "none";

function wait(msecs)
{
  var start = new Date().getTime();
  var cur = start;
  while(cur - start < msecs)
  {
  cur = new Date().getTime();
  }
}


var testvalue = 0;
function submit(){
  if(testvalue == 0){
  swal({
  title: " ",
  text: "피부톤 측정이 이루어지지 않았습니다.\n 피부톤 측정후 다음단계로 넘어가세요.",
  type: "warning",
  confirmButtonColor: "#DD6B55",
  confirmButtonText: "OK",
  closeOnConfirm: false
  });

  }
  else{

     document.getElementById("loader").style.display = "inline";
     var result;
     var xhr = new XMLHttpRequest();

     xhr.onload = function(){
     console.log(xhr.responseText);
     result=xhr.responseText;
     console.log(result);

     if(result=="spring_pale")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-1.html'
     }else if(result=="spring_light")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-2.html'
     }
     else if(result=="spring_vivid")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-3.html'
     }
     else if(result=="summer_whitish")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-4.html'
     }
     else if(result=="summer_pale")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-5.html'
     }
     else if(result=="summer_soft")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-6.html'
     }
     else if(result=="autumn_soft")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-7.html'
     }
     else if(result=="autumn_dull")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-8.html'
     }
     else if(result=="autumn_deep")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-9.html'
     }
     else if(result=="winter_vivid")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-10.html'
     }else if(result=="winter_deep")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-11.html'
     }else if(result=="winter_dark")
     {
       document.getElementById("loader").style.display = "none";
       location.href = 'result1-12.html'
     }
     else{
       document.getElementById("loader").style.display = "none";
       swal({
       title: " ",
       text: "Server Error",
       type: "warning",
       confirmButtonColor: "#DD6B55",
       confirmButtonText: "OK",
       closeOnConfirm: false
       });
     }
    };
    xhr.open("POST", "https://tonymony.com/page/5")
    xhr.send();

  }
}
function skintest() {
  document.getElementById("loader").style.display = "inline";
 var http = new XMLHttpRequest();
  var url = "https://tonymony.com/page/4";
  var params;
  http.open("POST", url, true);

//Send the proper header information along with the request
  http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

  http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
      alert(http.responseText);
    }
  }

console.log("haha");
    var ws = new WebSocket("ws://localhost:1900/");
    ws.onopen = function (evt) {
    };

    ws.onmessage = function (evt) {
        //alert("About to receive data");
        document.getElementById("loader").style.display = "none";

        var received_msg = evt.data;

        var n = received_msg.includes("button_click Plsease");
        if(n)
        {
            testvalue = 0;
            swal({
            title: " ",
            text: "Cube 전원 버튼을 눌러주세요.",
            type: "warning",
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "OK",
            closeOnConfirm: false
            });
        }
        if(!n)
        {
          testvalue = 1;
          swal(" ", "피부톤 측정이 완료되었습니다.", "success");
          var params;
          var l=received_msg.split("/");

          params="L="+l[1]+"&"+"A="+l[2]+"&"+"B="+l[3]
          http.send(params);
        }
    };
    ws.onclose = function () {
        // websocket is closed.
        document.getElementById("loader").style.display = "none";
        swal(" ", "Cube 연결이 끊어졌습니다.", "warning");
    };
};


</script>

</html>
